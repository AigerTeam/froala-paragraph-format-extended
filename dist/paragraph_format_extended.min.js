/**
 * Froala Editor Paragraph Format Extended plugin v0.1.0 (https://github.com/FinesseRus/froala-editor-paragraph-format-extended-plugin)
 * Copyright 2016-2018 Surgie Finesse
 * Licensed under the MIT license
 */
!function(t,e){if("function"==typeof define&&define.amd)define(["jquery","froala-editor"],e);else if("undefined"!=typeof exports)e(require("jquery"),require("froala-editor"));else{e(t.jQuery,t.jQueryFnFroalaEditor),t.paragraph_format_extended={}}}(this,function(t){"use strict";var e,a=(e=t)&&e.__esModule?e:{default:e};var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t};function n(t){var e="";return t.tag&&(e+=t.tag.toLowerCase()),t.id&&(e+="#"+t.id),t.class&&(e+=(t.class instanceof Array?t.class:String(t.class).split(/\s+/)).filter(function(t){return t}).sort().map(function(t){return"."+t}).join("")),e}a.default.FroalaEditor.DEFAULTS=r({},a.default.FroalaEditor.DEFAULTS,{paragraphFormatExtended:[{title:"Normal"},{tag:"h1",title:"Heading 1"},{tag:"h2",title:"Heading 2"},{tag:"h3",title:"Heading 3"},{tag:"h4",title:"Heading 4"},{tag:"h4",class:"fr-text-bordered",title:"Header 4 bordered"},{tag:"pre",title:"Code"}],paragraphFormatExtendedSelection:!1}),a.default.FroalaEditor.PLUGINS.paragraphFormatExtended=function(t){function e(e){var a=t.html.defaultTag(),i=void 0;e instanceof HTMLElement?(i={tag:e.tagName.toLowerCase(),id:e.getAttribute("id"),class:e.getAttribute("class")},-1!==["li","td","th"].indexOf(i.tag)&&(i.tag=a)):i={tag:a};var l=[i];return i.tag===a&&l.push(r({},i,{tag:null})),l.map(n)}function i(e,r,n){if(!(r&&r.toLowerCase()!==t.html.defaultTag()||n))return e;var i=void 0;if(e.find("ul, ol").length>0){i=(0,a.default)("<"+r+">"),e.prepend(i);for(var l=t.node.contents(e[0])[0];l&&-1===["ul","ol"].indexOf(l.tagName.toLowerCase());){var o=l.nextSibling;i.append(l),l=o}}else i=(0,a.default)("<"+r+">").html(e.html()),e.html(i);return i}function l(e,a,r){return a.toLowerCase()!==t.html.defaultTag()||r?d(e,a):(e.replaceWith(e.html()),null)}function o(e,a,r){return a.toLowerCase()!==t.html.defaultTag()||r?d(e,a):(t.node.isEmpty(e[0],!0)||e.append("<br/>"),e.replaceWith(e.html()),null)}function d(e,r){r||(r='div class="fr-temp-div"'+(t.node.isEmpty(e[0],!0)?' data-empty="true"':""));var n=(0,a.default)("<"+r+" "+t.node.attributes(e[0])+">").html(e.html());return e.replaceWith(n),n}return{apply:function(e){var r=function(t){var e=/([^\.#]*)(#[^\.]+|.{0})(\.[\s\S]+|.{0})/.exec(t);return e?{tag:e[1].toLowerCase()||null,id:e[2].slice(1)||null,class:e[3].split(".").filter(function(t){return t}).join(" ")||null}:{}}(e),n=r.tag||t.html.defaultTag(),s=r.class||r.id;t.selection.save(),t.html.wrap(!0,!0,!0,!0),t.selection.restore();var p=(0,a.default)(t.selection.blocks()),u=p;t.selection.save(),t.$el.find("pre").attr("skip",!0),p.each(function(e,p){if(!t.node.isList(p)){var f=(0,a.default)(p);if(!f.find(u).length){var c=(f.is("li")?i:f.parent().is("li")?l:f.parent().is("td, th")?o:d)(f,n,s);c&&(c.attr({class:r.class||null,id:r.id||null}),u=u.add(c))}}}),t.$el.find('pre:not([skip="true"]) + pre:not([skip="true"])').each(function(t,e){var r=(0,a.default)(e);r.prev().append("<br>"+r.html()),r.remove()}),t.$el.find("pre").removeAttr("skip"),t.html.unwrap(),t.selection.restore()},refreshButton:function(a){if(t.opts.paragraphFormatExtendedSelection){for(var r=e(t.selection.blocks()[0]),i=t.opts.paragraphFormatExtended,l="â€”",o=0;o<i.length;++o)if(-1!==r.indexOf(n(i[o]))){l=t.language.translate(i[o].title);break}a.find("> span").text(l)}},refreshDropdown:function(a){var r=e(t.selection.blocks()[0]).map(function(t){return'.fr-command[data-param1="'+t+'"]'}).join(", ");a.find(r).addClass("fr-active")}}},a.default.FroalaEditor.DefineIcon("paragraphFormatExtended",{NAME:"paragraph"}),a.default.FroalaEditor.RegisterCommand("paragraphFormatExtended",{type:"dropdown",title:"Paragraph Format",plugin:"paragraphFormatExtended",displaySelection:function(t){return t.opts.paragraphFormatExtendedSelection},defaultSelection:"Format",displaySelectionWidth:100,html:function(){var t=this;return'<ul class="fr-dropdown-list">'+this.opts.paragraphFormatExtended.map(function(e){var a=t.language.translate(e.title),r=e.tag||t.html.defaultTag(),i=n(e);return"<li><"+r+(e.class?' class="'+e.class+'"':"")+' style="padding: 0 !important; margin: 0 !important;"><a class="fr-command" data-cmd="paragraphFormatExtended" data-param1="'+i+'" title="'+a+'">'+a+"</a></"+r+"></li>"}).join("\n")+"</ul>"},callback:function(t,e){this.paragraphFormatExtended.apply(e)},refresh:function(t){this.paragraphFormatExtended.refreshButton(t)},refreshOnShow:function(t,e){this.paragraphFormatExtended.refreshDropdown(e)}})});