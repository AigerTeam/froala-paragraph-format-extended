/**
 * Froala Editor Paragraph Format Extended plugin v0.1.2 (https://github.com/Finesse/froala-editor-paragraph-format-extended-plugin)
 * Copyright 2016-2018 Surgie Finesse
 * Licensed under the MIT license
 */
!function(t,e){if("function"==typeof define&&define.amd)define(["jquery","froala-editor"],e);else if("undefined"!=typeof exports)e(require("jquery"),require("froala-editor"));else{e(t.jQuery,t.jQuery.fn.froalaEditor),t.paragraph_format_extended={}}}(this,function(t,e){"use strict";var a;function r(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},r=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),r.forEach(function(e){n(t,e,a[e])})}return t}function n(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var o=(t=(a=t)&&a.__esModule?a:{default:a}).default.FroalaEditor;function i(t){var e="";return t.tag&&(e+=t.tag.toLowerCase()),t.id&&(e+="#".concat(t.id)),t.class&&(e+=(t.class instanceof Array?t.class:String(t.class).split(/\s+/)).filter(function(t){return t}).sort().map(function(t){return".".concat(t)}).join("")),e}o.DEFAULTS=r({},o.DEFAULTS,{paragraphFormatExtended:[{title:"Normal"},{tag:"h1",title:"Heading 1"},{tag:"h2",title:"Heading 2"},{tag:"h3",title:"Heading 3"},{tag:"h4",title:"Heading 4"},{tag:"h4",class:"fr-text-bordered",title:"Header 4 bordered"},{tag:"pre",title:"Code"}],paragraphFormatExtendedSelection:!1}),o.PLUGINS.paragraphFormatExtended=function(e){function a(t){var a,n=e.html.defaultTag();t instanceof HTMLElement?(a={tag:t.tagName.toLowerCase(),id:t.getAttribute("id"),class:t.getAttribute("class")},-1!==["li","td","th"].indexOf(a.tag)&&(a.tag=n)):a={tag:n};var o=[a];return a.tag===n&&o.push(r({},a,{tag:null})),o.map(i)}function n(a,r,n){if(!(r&&r.toLowerCase()!==e.html.defaultTag()||n))return a;var o;if(a.find("ul, ol").length>0){o=(0,t.default)("<".concat(r,">")),a.prepend(o);for(var i=e.node.contents(a[0])[0];i&&-1===["ul","ol"].indexOf(i.tagName.toLowerCase());){var l=i.nextSibling;o.append(i),i=l}}else o=(0,t.default)("<".concat(r,">")).html(a.html()),a.html(o);return o}function o(t,a,r){return a.toLowerCase()!==e.html.defaultTag()||r?c(t,a):(t.replaceWith(t.html()),null)}function l(t,a,r){return a.toLowerCase()!==e.html.defaultTag()||r?c(t,a):(e.node.isEmpty(t[0],!0)||t.append("<br/>"),t.replaceWith(t.html()),null)}function c(a,r){r||(r='div class="fr-temp-div"'.concat(e.node.isEmpty(a[0],!0)?' data-empty="true"':""));var n=(0,t.default)("<".concat(r," ").concat(e.node.attributes(a[0]),">")).html(a.html());return a.replaceWith(n),n}return{apply:function(a){var r=function(t){var e=/([^\.#]*)(#[^\.]+|.{0})(\.[\s\S]+|.{0})/.exec(t);return e?{tag:e[1].toLowerCase()||null,id:e[2].slice(1)||null,class:e[3].split(".").filter(function(t){return t}).join(" ")||null}:{}}(a),i=r.tag||e.html.defaultTag(),d=r.class||r.id;e.selection.save(),e.html.wrap(!0,!0,!0,!0),e.selection.restore();var s=(0,t.default)(e.selection.blocks()),u=s;e.selection.save(),e.$el.find("pre").attr("skip",!0),s.each(function(a,s){if(!e.node.isList(s)){var f=(0,t.default)(s);if(!f.find(u).length){var p=(f.is("li")?n:f.parent().is("li")?o:f.parent().is("td, th")?l:c)(f,i,d);p&&(p.attr({class:r.class||null,id:r.id||null}),u=u.add(p))}}}),e.$el.find('pre:not([skip="true"]) + pre:not([skip="true"])').each(function(e,a){var r=(0,t.default)(a);r.prev().append("<br>".concat(r.html())),r.remove()}),e.$el.find("pre").removeAttr("skip"),e.html.unwrap(),e.selection.restore()},refreshButton:function(t){if(e.opts.paragraphFormatExtendedSelection){for(var r=a(e.selection.blocks()[0]),n=e.opts.paragraphFormatExtended,o="â€”",l=0;l<n.length;++l)if(-1!==r.indexOf(i(n[l]))){o=e.language.translate(n[l].title);break}t.find("> span").text(o)}},refreshDropdown:function(t){var r=a(e.selection.blocks()[0]).map(function(t){return'.fr-command[data-param1="'.concat(t,'"]')}).join(", ");t.find(r).addClass("fr-active")}}},o.DefineIcon("paragraphFormatExtended",{NAME:"paragraph"}),o.RegisterCommand("paragraphFormatExtended",{type:"dropdown",title:"Paragraph Format",plugin:"paragraphFormatExtended",displaySelection:function(t){return t.opts.paragraphFormatExtendedSelection},defaultSelection:"Format",displaySelectionWidth:100,html:function(){var t=this,e=this.opts.paragraphFormatExtended.map(function(e){var a=t.language.translate(e.title),r=e.tag||t.html.defaultTag(),n=i(e);return"<li>"+"<".concat(r).concat(e.class?' class="'.concat(e.class,'"'):"",' style="padding: 0 !important; margin: 0 !important;">')+'<a class="fr-command" data-cmd="paragraphFormatExtended" data-param1="'.concat(n,'" title="').concat(a,'">')+a+"</a>"+"</".concat(r,">")+"</li>"}).join("\n");return'<ul class="fr-dropdown-list">'.concat(e,"</ul>")},callback:function(t,e){this.paragraphFormatExtended.apply(e)},refresh:function(t){this.paragraphFormatExtended.refreshButton(t)},refreshOnShow:function(t,e){this.paragraphFormatExtended.refreshDropdown(e)}})});