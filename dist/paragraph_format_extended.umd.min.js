/**
 * Froala Editor Paragraph Format Extended plugin v0.2.0 (https://github.com/Finesse/froala-editor-paragraph-format-extended-plugin)
 * Copyright 2016-2019 Surgie Finesse
 * Licensed under the MIT license
 */
!function(t,e){if("function"==typeof define&&define.amd)define(["froala-editor"],e);else if("undefined"!=typeof exports)e(require("froala-editor"));else{e(t.FroalaEditor),t.paragraph_format_extended={}}}(this,function(t){"use strict";var e;function a(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),n.forEach(function(e){r(t,e,a[e])})}return t}function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function n(t){var e="";return t.tag&&(e+=t.tag.toLowerCase()),t.id&&(e+="#".concat(t.id)),t.class&&(e+=(t.class instanceof Array?t.class:String(t.class).split(/\s+/)).filter(function(t){return t}).sort().map(function(t){return".".concat(t)}).join("")),e}(t=(e=t)&&e.__esModule?e:{default:e}).default.DEFAULTS=a({},t.default.DEFAULTS,{paragraphFormatExtended:[{title:"Normal"},{tag:"h1",title:"Heading 1"},{tag:"h2",title:"Heading 2"},{tag:"h3",title:"Heading 3"},{tag:"h4",title:"Heading 4"},{tag:"h4",class:"fr-text-bordered",title:"Header 4 bordered"},{tag:"pre",title:"Code"}],paragraphFormatExtendedSelection:!1}),t.default.PLUGINS.paragraphFormatExtended=function(t){var e=t.$;function r(e){var r,o=t.html.defaultTag();e instanceof HTMLElement?(r={tag:e.tagName.toLowerCase(),id:e.getAttribute("id"),class:e.getAttribute("class")},-1!==["li","td","th"].indexOf(r.tag)&&(r.tag=o)):r={tag:o};var i=[r];return r.tag===o&&i.push(a({},r,{tag:null})),i.map(n)}function o(a,r,n){if(!(r&&r.toLowerCase()!==t.html.defaultTag()||n))return a;var o;if(a.find("ul, ol").length>0){o=e("<".concat(r,">")),a.prepend(o);for(var i=t.node.contents(a[0])[0];i&&-1===["ul","ol"].indexOf(i.tagName.toLowerCase());){var l=i.nextSibling;o.append(i),i=l}}else o=e("<".concat(r,">")).html(a.html()),a.html(o);return o}function i(e,a,r){return a.toLowerCase()!==t.html.defaultTag()||r?c(e,a):(e.replaceWith(e.html()),null)}function l(e,a,r){return a.toLowerCase()!==t.html.defaultTag()||r?c(e,a):(t.node.isEmpty(e[0],!0)||e.append("<br/>"),e.replaceWith(e.html()),null)}function c(a,r){r||(r='div class="fr-temp-div"'.concat(t.node.isEmpty(a[0],!0)?' data-empty="true"':""));var n=e("<".concat(r," ").concat(t.node.attributes(a[0]),">")).html(a.html());return a.replaceWith(n),n}return{apply:function(a){var r=function(t){var e=/([^\.#]*)(#[^\.]+|.{0})(\.[\s\S]+|.{0})/.exec(t);return e?{tag:e[1].toLowerCase()||null,id:e[2].slice(1)||null,class:e[3].split(".").filter(function(t){return t}).join(" ")||null}:{}}(a),n=r.tag||t.html.defaultTag(),d=r.class||r.id;t.selection.save(),t.html.wrap(!0,!0,!0,!0,!0),t.selection.restore();var s=e(t.selection.blocks()),p=s;t.selection.save(),t.$el.find("pre").attr("skip",!0),s.each(function(a,s){if(!t.node.isList(s)){var u=e(s);if(!u.find(p).length){var f=(u.is("li")?o:u.parent().is("li")?i:u.parent().is("td, th")?l:c)(u,n,d);f&&(f.attr({class:r.class||null,id:r.id||null}),p=p.add(f))}}}),t.$el.find('pre:not([skip="true"]) + pre:not([skip="true"])').each(function(t,a){var r=e(a);r.prev().append("<br>".concat(r.html())),r.remove()}),t.$el.find("pre").removeAttr("skip"),t.html.unwrap(),t.selection.restore()},refreshButton:function(e){if(t.opts.paragraphFormatExtendedSelection){for(var a=r(t.selection.blocks()[0]),o=t.opts.paragraphFormatExtended,i="â€”",l=0;l<o.length;++l)if(-1!==a.indexOf(n(o[l]))){i=t.language.translate(o[l].title);break}e.find("> span").text(i)}},refreshDropdown:function(e){var a=r(t.selection.blocks()[0]).map(function(t){return'.fr-command[data-param1="'.concat(t,'"]')}).join(", ");e.find(a).addClass("fr-active")}}},t.default.DefineIcon("paragraphFormatExtended",{NAME:"paragraph",SVG_KEY:"paragraphFormat"}),t.default.RegisterCommand("paragraphFormatExtended",{type:"dropdown",title:"Paragraph Format",plugin:"paragraphFormatExtended",displaySelection:function(t){return t.opts.paragraphFormatExtendedSelection},defaultSelection:function(t){return t.language.translate(t.opts.paragraphDefaultSelection)},displaySelectionWidth:100,html:function(){var t=this,e=this.opts.paragraphFormatExtended.map(function(e){var a=t.language.translate(e.title),r=e.tag||t.html.defaultTag(),o=n(e);return"<li>"+"<".concat(r).concat(e.class?' class="'.concat(e.class,'"'):"",' style="padding: 0 !important; margin: 0 !important;">')+'<a class="fr-command" data-cmd="paragraphFormatExtended" data-param1="'.concat(o,'" title="').concat(a,'">')+a+"</a>"+"</".concat(r,">")+"</li>"}).join("\n");return'<ul class="fr-dropdown-list">'.concat(e,"</ul>")},callback:function(t,e){this.paragraphFormatExtended.apply(e)},refresh:function(t){this.paragraphFormatExtended.refreshButton(t)},refreshOnShow:function(t,e){this.paragraphFormatExtended.refreshDropdown(e)}})});